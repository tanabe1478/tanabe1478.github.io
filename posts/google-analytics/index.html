<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="t__nabe1478's Blog"/><link rel="canonical" href="https://tanabe1478.github.io/posts/google-analytics"/><meta name="twitter:url" content="https://tanabe1478.github.io/posts/google-analytics"/><meta name="og:url" content="https://tanabe1478.github.io/posts/google-analytics"/><title>Google Analyticsを導入した | t__nabe1478's Blog</title><meta name="twitter:title" content="Google Analyticsを導入した | t__nabe1478's Blog"/><meta name="og:title" content="Google Analyticsを導入した | t__nabe1478's Blog"/><meta name="description" content="このサイトにGoogle Analyticsを導入したので経緯と手順"/><meta name="twitter:description" content="このサイトにGoogle Analyticsを導入したので経緯と手順"/><meta name="og:description" content="このサイトにGoogle Analyticsを導入したので経緯と手順"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to t__nabe1478's Blog"/><meta name="twitter:image" content="https://tanabe1478.github.io/images/logo.png"/><meta name="og:image" content="https://tanabe1478.github.io/images/logo.png"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">t__nabe1478's Blog</a></div></header><div class="wrapper"><article><div class="content"><h1>Google Analyticsを導入した</h1><p>当サイトにGoogle Analyticsを導入しました。それほど多くの人が見に来ているわけではないこのサイトにGoogle Analyticsを導入した理由は、訪問されているページがあった時に見に来ている人にとってより役に立つような内容に適宜公開した記事を修正していける仕組みを作りたいと思ったからです。</p><p>アクセスの多い記事があって、その記事を後から修正するきっかけになると思って導入を考えました。</p><p>このは<a href="https://tanabe1478.github.io/posts/blog-structure/">以前紹介した</a>通り、PublishというSwift製の静的サイトジェネレータを使って生成されていて、デプロイ先にはGitHub Pagesを使っています。また、PublishはできたばかりのOSSでまだまだ機能は不足しているものの拡張可能に作られているのでテーマやプラグインを自作することができます。</p><ul><li><a href="https://tanabe1478.github.io/posts/youtube-publish-plugin/">このサイトを生成しているPublish向けのYoutube埋め込みを表示するプラグインを作った</a></li></ul><p>Google Analyticsのトラッキングコードを埋め込むためにheadタグをカスタマイズしたかったのですが生成したノードに後からノードを追加する方法が現状のPublishでは提供されていません。</p><p>このノード、というのはPublishが依存しているPlotというHTMLなどをSwiftで記述できるよう製作されたDSLに登場する概念です。</p><p>後からノードを追加する機能をprivateに定義してheadタグの生成を行うメソッドを流用、変更してGoogle Analytics用のプラグインを作りました。</p><p>今回はYoutubeのときと違ってプラグインとしてコミュニティに公開しなかったのですが、すでに後からノードを作れるより汎用的な機能についての議論が進められていたからです。今後のPublishのアップデートで今回作った機能の大部分は不要になると思いますが、現状ないのは事実なので手元で拡張してそれを使っています。</p><p>実装を含めたものはDevelopers.IOで記事にしました。</p><ul><li><a href="https://dev.classmethod.jp/articles/publish-google-analytics/">Swiftでブログが作れるPublishで生成したサイトでGoogle Analyticsを利用できるようにする | Developers.IO</a></li></ul><p>少しずつ手入れをしながら記事を書くのは育成ゲームっぽくて楽しいです。</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/雑記">雑記</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>